{% extends 'homepage/base.html' %}
{% load static %}

{% block title %}
<title>Blog</title>
{% endblock %}

{% block favicon %}
{% endblock %}

{% block app_stylesheets %}
<link rel="stylesheet" type="text/css" href="{% static 'blog/blog.css' %}">
{% endblock %}

{% block content %}

<div class="container load-hidden blog-reveal">
  <main role="main" class="container">

    {% if user.is_authenticated %}
      <a href="{% url 'blog:create-post' %}" class="btn btn-primary" style="margin-bottom:15px;">Create post</a>
    {% endif %}

    {% if three_recent_posts|length > 0 %}
      <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark">
        <div class="col-md-6 px-0">
          <h1 class="display-4 font-italic" name="title">{{ three_recent_posts.0.title }}</h1>
          <p>{{ three_recent_posts.0.pub_date }}</p>
          <p class="lead my-3">{{ three_recent_posts.0.body|truncatechars_html:150 }}</p>
          <p class="lead mb-0"><a href="{% url 'blog:view-post' three_recent_posts.0.slug %}" class="text-white font-weight-bold">Continue reading...</a></p>
        </div>
      </div>
    {% else %}
    <p>No posts available at this time.</p>
    {% endif %}
    {% if three_recent_posts|length > 1 %}
      <div class="row mb-2">
        <div class="col-md-6">
          <div class="card flex-md-row mb-4 shadow-sm h-md-250" style="height:250px;">
            <div class="card-body d-flex flex-column align-items-start">
              <h3 class="mb-0 center">
                <a class="text-dark" href="{% url 'blog:view-post' three_recent_posts.1.slug %}">{{ three_recent_posts.1.title }}</a>
              </h3>
              <div class="mb-1 text-muted center">{{ three_recent_posts.1.pub_date }}</div>
              <p class="card-text mb-auto">{{ three_recent_posts.1.body|truncatechars_html:250 }}</p>
              <a href="{% url 'blog:view-post' three_recent_posts.1.slug %}">Continue reading</a>
            </div>
          </div>
        </div>
      {% endif %}
      {% if three_recent_posts|length > 2 %}
        <div class="col-md-6">
          <div class="card flex-md-row mb-4 shadow-sm h-md-250" style="height:250px;">
            <div class="card-body d-flex flex-column align-items-start">
              <h3 class="mb-0 center">
                <a class="text-dark" href="{% url 'blog:view-post' three_recent_posts.2.slug %}">{{ three_recent_posts.2.title }}</a>
              </h3>
              <div class="mb-1 text-muted center">{{ three_recent_posts.2.pub_date }}</div>
              <div class="card-text mb-auto">{{ three_recent_posts.2.body|truncatechars_html:250 }}</div>
              <a href="{% url 'blog:view-post' three_recent_posts.2.slug %}">Continue reading</a>
            </div>
          </div>
        </div>
      </div>
      {% endif %}

    {% if posts|length > 0 %}
      <div class="row">
        <div class="col-md-8 blog-main">
          <h3 class="pb-3 mb-4 font-italic border-bottom">Older Posts</h3>
          {% for post in posts %}
          <div class="blog-post">
            <h2 class="blog-post-title">{{ post.title }}</h2>
            <p class="blog-post-meta">{{ post.pub_date }} by <a href="#">{{ post.author_id.username }}</a></p>
            <p>{{ post.body|truncatechars_html:300 }}</p>
            <a href="{% url 'blog:view-post' post.slug %}">Continue reading</a>
          </div><!-- /.blog-post -->
          {% endfor %}
          {% include 'blog/pagination.html' %}
        </div><!-- /.blog-main -->
      </div><!-- /.row -->
    {% endif %}
  </main><!-- /.container -->
</div>
{% endblock %}

{% block scripts %}
<script>
  ScrollReveal().reveal('.blog-reveal', { delay: 500, duration: 700, easing: 'ease-in-out' });
</script>
{% endblock %}
