{% extends 'homepage/base.html' %}
{% load static %}

{% block title %}
<title>Blog</title>
{% endblock %}

{% block content %}

<div class="container">

{% if user.is_authenticated %}
  <a href="{% url 'blog:create-post' %}" class="btn btn-primary">Create post</a>
{% endif %}


{% if post_list|length > 2 %}
  <div class="jumbotron p-3 p-md-5 text-white rounded bg-dark">
    <div class="col-md-6 px-0">
      <h1 class="display-4 font-italic" name="title">{{ post_list.0.title }}</h1>
      <p class="lead my-3">Multiple lines of text that form the lede, informing new readers quickly and efficiently about what's most interesting in this post's contents.</p> <!-- figure out how to get first line of body here -->
      <p class="lead mb-0"><a href="{% url 'blog:view-post' post_list.0.slug %}" class="text-white font-weight-bold">Continue reading...</a></p>
    </div>
  </div>

  <div class="row mb-2">
    <div class="col-md-6">
      <div class="card flex-md-row mb-4 shadow-sm h-md-250">
        <div class="card-body d-flex flex-column align-items-start">
          <h3 class="mb-0">
            <a class="text-dark" href="{% url 'blog:view-post' post_list.1.slug %}">{{ post_list.1.title }}</a>
          </h3>
          <div class="mb-1 text-muted">{{ post_list.1.pub_date }}</div>
          <p class="card-text mb-auto">This is a wider card with supporting text below as a natural lead-in to additional content.</p>
          <a href="{% url 'blog:view-post' post_list.1.slug %}">Continue reading</a>
        </div>
        <img class="card-img-right flex-auto d-none d-lg-block" data-src="holder.js/200x250?theme=thumb" alt="Card image cap">
      </div>
    </div>
    <div class="col-md-6">
      <div class="card flex-md-row mb-4 shadow-sm h-md-250">
        <div class="card-body d-flex flex-column align-items-start">
          <h3 class="mb-0">
            <a class="text-dark" href="{% url 'blog:view-post' post_list.2.slug %}">{{ post_list.2.title }}</a>
          </h3>
          <div class="mb-1 text-muted">{{ post_list.2.pub_date }}</div>
          <p class="card-text mb-auto">This is a wider card with supporting text below as a natural lead-in to additional content.</p>
          <a href="{% url 'blog:view-post' post_list.2.slug %}">Continue reading</a>
        </div>
        <img class="card-img-right flex-auto d-none d-lg-block" data-src="holder.js/200x250?theme=thumb" alt="Card image cap">
      </div>
    </div>
  </div>


<main role="main" class="container">
  <div class="row">
    <div class="col-md-8 blog-main">
      <h3 class="pb-3 mb-4 font-italic border-bottom">
        From the Firehose
      </h3>
      {% for post in posts %}
      <div class="blog-post">
        <h2 class="blog-post-title">{{ post.title }}</h2>
        <p class="blog-post-meta">{{ post.pub_date }} by <a href="#">Mark</a></p>
        <p>{{ post.body }}
      </div><!-- /.blog-post -->
      {% endfor %}


      <nav class="blog-pagination">
        {% if posts.has_previous %}
          <a class="btn btn-outline-primary" href="?page=1">First</a>
          <a class="btn btn-outline-secondary" href="?page={{ posts.previous_page_number }}">Previous</a>
        {% endif %}

        Page {{ posts.number }} of {{ posts.paginator.num_pages }}

        {% if posts.has_next %}
            <a class="btn btn-outline-primary" href="?page={{ posts.next_page_number }}">Next</a>
            <a class="btn btn-outline-secondary" href="?page={{ posts.paginator.num_pages }}">Last</a>
        {% endif %}
      </nav>

    </div><!-- /.blog-main -->

    <!--
    <aside class="col-md-4 blog-sidebar">
      <div class="p-3 mb-3 bg-light rounded">
        <h4 class="font-italic">About</h4>
        <p class="mb-0">Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>
      </div>

      <div class="p-3">
        <h4 class="font-italic">Archives</h4>
        <ol class="list-unstyled mb-0">
          <li><a href="#">March 2014</a></li>
          <li><a href="#">February 2014</a></li>
          <li><a href="#">January 2014</a></li>
          <li><a href="#">December 2013</a></li>
          <li><a href="#">November 2013</a></li>
          <li><a href="#">October 2013</a></li>
          <li><a href="#">September 2013</a></li>
          <li><a href="#">August 2013</a></li>
          <li><a href="#">July 2013</a></li>
          <li><a href="#">June 2013</a></li>
          <li><a href="#">May 2013</a></li>
          <li><a href="#">April 2013</a></li>
        </ol>
      </div>

      <div class="p-3">
        <h4 class="font-italic">Elsewhere</h4>
        <ol class="list-unstyled">
          <li><a href="#">GitHub</a></li>
          <li><a href="#">Twitter</a></li>
          <li><a href="#">Facebook</a></li>
        </ol>
      </div>
    </aside><!-- /.blog-sidebar -->

  </div><!-- /.row -->

</main><!-- /.container -->

{% else %}
<p>No blogs are available.</p>
{% endif %}

</div>
{% endblock %}
